{
    "metadata": {
        "schema_version": "1.0.0",
        "module_name": "website",
        "description": "HOMESERVER website frontend/backend update system via GitHub",
        "enabled": true
    },
    "config": {
        "repository": {
            "url": "https://github.com/homeserversltd/website.git",
            "branch": "main",
            "clone_method": "https",
            "temp_directory": "/tmp/homeserver-website-update"
        },
        "target_paths": {
            "base_directory": "/var/www/homeserver",
            "components": {
                "frontend": {
                    "enabled": true,
                    "source_path": "src",
                    "target_path": "/var/www/homeserver/src",
                    "description": "React frontend components and assets"
                },
                "backend": {
                    "enabled": true,
                    "source_path": "backend",
                    "target_path": "/var/www/homeserver/backend",
                    "description": "Flask backend API and services"
                },
                "premium": {
                    "enabled": true,
                    "source_path": "premium",
                    "target_path": "/var/www/homeserver/premium",
                    "description": "Premium features and functionality"
                },
                "public": {
                    "enabled": true,
                    "source_path": "public",
                    "target_path": "/var/www/homeserver/public",
                    "description": "Static public assets"
                }
            }
        },
        "build_process": {
            "pre_update_commands": [
                "systemctl stop homeserver.service"
            ],
            "npm_install": true,
            "npm_build": true,
            "post_update_commands": [
                "systemctl start homeserver.service",
                "systemctl status homeserver.service --no-pager"
            ]
        },
        "backup": {
            "enabled": true,
            "backup_directory": "/var/backups/homeserver/website",
            "include_paths": [
                "/var/www/homeserver/src",
                "/var/www/homeserver/backend", 
                "/var/www/homeserver/premium",
                "/var/www/homeserver/public",
                "/var/www/homeserver/package.json",
                "/var/www/homeserver/package-lock.json"
            ],
            "exclude_patterns": [
                "node_modules",
                "*.pyc",
                "__pycache__",
                ".git",
                "*.log"
            ],
            "retention": {
                "max_age_days": 30,
                "keep_minimum": 5
            }
        },
        "verification": {
            "check_git_clone": true,
            "verify_npm_build": true,
            "check_service_status": true,
            "timeout_seconds": 600,
            "health_check_url": "http://localhost:5000/health",
            "health_check_timeout": 30
        },
        "rollback": {
            "enabled": true,
            "automatic_on_failure": true,
            "preserve_user_data": true
        }
    }
}
