{
    "metadata": {
        "schema_version": "0.1.12",
        "description": "Emergency hotfixes and critical patches for homeserver systems",
        "enabled": true
    },
    "targets": [
        {
            "id": "gogs_repository_fix",
            "description": "Fix Gogs repository path to use local storage instead of NAS dependency",
            "target_id": "gogs",
            "version_check": {
                "type": "module_schema",
                "module": "gogs",
                "max_version": "0.1.7"
            },
            "has_run": false
        },
        {
            "id": "factory_config_fix",
            "description": "Ensure factory config exists as immutable backup",
            "target_id": "system",
            "version_check": {
                "type": "file_exists",
                "path": "/etc/homeserver.factory",
                "invert": true
            },
            "has_run": false
        },
        {
            "id": "test_hotfix",
            "description": "Simple test hotfix that always passes",
            "target_id": "test",
            "version_check": {
                "type": "always",
                "value": true
            },
            "has_run": false
        },
        {
            "id": "website_restore",
            "description": "Emergency website restoration script for catastrophic failures",
            "target_id": "website",
            "version_check": {
                "type": "manual",
                "description": "Run manually when website is completely broken"
            },
            "has_run": false
        },
        {
            "id": "calibre_helper_daemon_install",
            "description": "Ensure Calibre Helper Daemon is installed if Calibre Web exists",
            "target_id": "calibre",
            "version_check": {
                "type": "file_exists",
                "path": "/etc/systemd/system/calibre-web.service",
                "invert": false
            },
            "has_run": false
        },
        {
            "id": "mount_nas_service_update",
            "description": "Update mountNas.service to new configuration with vault dependencies",
            "target_id": "systemd",
            "version_check": {
                "type": "file_exists",
                "path": "/etc/systemd/system/mountNas.service",
                "invert": false
            },
            "has_run": false
        }
    ]
}